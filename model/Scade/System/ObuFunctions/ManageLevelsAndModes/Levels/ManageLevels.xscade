<?xml version="1.0" encoding="UTF-8"?>
<File xmlns="http://www.esterel-technologies.com/ns/scade/4" xmlns:ed="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5" xmlns:kcg="http://www.esterel-technologies.com/ns/scade/pragmas/codegen/2">
	<declarations>
		<Operator kind="node" name="ManageLevels">
			<inputs>
				<Variable name="train_standstill">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778dd/4664/660/54f050623d78"/>
					</pragmas>
				</Variable>
				<Variable name="conditional_transition">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition_PriorityTable"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778de/4664/660/54f050626b25"/>
					</pragmas>
				</Variable>
				<Variable name="level_transition_priority_table">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition_PriorityTable"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778df/4664/660/54f0506244a0"/>
					</pragmas>
				</Variable>
				<Variable name="driver_level_transition">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e0/4664/660/54f050627419"/>
					</pragmas>
				</Variable>
				<Variable name="getAck">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e1/4664/660/54f0506247a0"/>
					</pragmas>
				</Variable>
				<Variable name="currentDistance">
					<type>
						<NamedType>
							<type>
								<TypeRef name="int"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e3/4664/660/54f050624283"/>
					</pragmas>
				</Variable>
				<Variable name="ackDistance">
					<type>
						<NamedType>
							<type>
								<TypeRef name="int"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e4/4664/660/54f050623c15"/>
					</pragmas>
				</Variable>
				<Variable name="immediateAck">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e5/4664/660/54f050624001"/>
					</pragmas>
				</Variable>
				<Variable name="ERTMS_capabilities">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_ERTMS_capabilities"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e6/4664/660/54f05062c47"/>
					</pragmas>
				</Variable>
				<Variable name="received_L2_L3_MA">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e7/4664/660/54f050626183"/>
					</pragmas>
				</Variable>
				<Variable name="received_L1_MA">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e8/4664/660/54f050622d11"/>
					</pragmas>
				</Variable>
				<Variable name="received_target_speed">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778e9/4664/660/54f050623c53"/>
					</pragmas>
				</Variable>
			</inputs>
			<outputs>
				<Variable name="next_level">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d9/4664/660/54f050622de4"/>
					</pragmas>
				</Variable>
				<Variable name="TripTrain">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778da/4664/660/54f050622ded"/>
					</pragmas>
				</Variable>
				<Variable name="previous_level">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778db/4664/660/54f0506248e6"/>
					</pragmas>
				</Variable>
				<Variable name="needsAckFromDriver">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778dc/4664/660/54f05062672d"/>
					</pragmas>
				</Variable>
				<Variable name="announced_level">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1a75d/CAD/D7C/55118e3c3be4"/>
					</pragmas>
				</Variable>
				<Variable name="announce_driver_selection">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/3ba63/61B9/2528/5512e34166a0"/>
					</pragmas>
				</Variable>
				<Variable name="service_brake">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/75990/61B9/2528/5513df2a55a7"/>
					</pragmas>
				</Variable>
			</outputs>
			<locals>
				<Variable name="_L2">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778c7/4664/660/54f050621d4d"/>
					</pragmas>
				</Variable>
				<Variable name="_L1">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778c8/4664/660/54f050622c07"/>
					</pragmas>
				</Variable>
				<Variable name="_L11">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778c9/4664/660/54f050624e7f"/>
					</pragmas>
				</Variable>
				<Variable name="_L15">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778ca/4664/660/54f050622813"/>
					</pragmas>
				</Variable>
				<Variable name="_L16">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition_PriorityTable"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778cb/4664/660/54f050621191"/>
					</pragmas>
				</Variable>
				<Variable name="_L17">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition_PriorityTable"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778cc/4664/660/54f050626d8"/>
					</pragmas>
				</Variable>
				<Variable name="_L18">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778cd/4664/660/54f05062146f"/>
					</pragmas>
				</Variable>
				<Variable name="_L19">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778ce/4664/660/54f050625b54"/>
					</pragmas>
				</Variable>
				<Variable name="_L21">
					<type>
						<NamedType>
							<type>
								<TypeRef name="int"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d0/4664/660/54f05062e10"/>
					</pragmas>
				</Variable>
				<Variable name="_L22">
					<type>
						<NamedType>
							<type>
								<TypeRef name="int"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d1/4664/660/54f0506259c1"/>
					</pragmas>
				</Variable>
				<Variable name="_L23">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d2/4664/660/54f0506216ae"/>
					</pragmas>
				</Variable>
				<Variable name="_L24">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_ERTMS_capabilities"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d3/4664/660/54f050622717"/>
					</pragmas>
				</Variable>
				<Variable name="_L9">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d4/4664/660/54f050626abd"/>
					</pragmas>
				</Variable>
				<Variable name="_L25">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d5/4664/660/54f0506221db"/>
					</pragmas>
				</Variable>
				<Variable name="_L26">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d6/4664/660/54f050621443"/>
					</pragmas>
				</Variable>
				<Variable name="_L27">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d7/4664/660/54f050625bf0"/>
					</pragmas>
				</Variable>
				<Variable name="_L28">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1778d8/4664/660/54f0506235ab"/>
					</pragmas>
				</Variable>
				<Variable name="_L29">
					<type>
						<NamedType>
							<type>
								<TypeRef name="Level_And_Mode_Types_Pkg::T_LevelTransition"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/1a757/CAD/D7C/55118e2b18ed"/>
					</pragmas>
				</Variable>
				<Variable name="_L30">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/3ba5d/61B9/2528/5512e31b68e1"/>
					</pragmas>
				</Variable>
				<Variable name="_L31">
					<type>
						<NamedType>
							<type>
								<TypeRef name="bool"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/75997/61B9/2528/5513df3e6e90"/>
					</pragmas>
				</Variable>
				<Variable name="_L32">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/54738/5ADE/168C/55195cee226c"/>
					</pragmas>
				</Variable>
				<Variable name="_L33">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/54740/5ADE/168C/551961fd6b92"/>
					</pragmas>
				</Variable>
				<Variable name="_L34">
					<type>
						<NamedType>
							<type>
								<TypeRef name="M_LEVEL"/>
							</type>
						</NamedType>
					</type>
					<pragmas>
						<ed:Variable oid="!ed/54748/5ADE/168C/551962176791"/>
					</pragmas>
				</Variable>
			</locals>
			<data>
				<!-- _L9 = manage_priorities(_L32, _L16, _L17, _L15, _L18, _L24); -->
				<Equation>
					<lefts>
						<VariableRef name="_L9"/>
					</lefts>
					<right>
						<!-- manage_priorities(_L32, _L16, _L17, _L15, _L18, _L24) -->
						<CallExpression>
							<operator>
								<OpCall name="1">
									<operator>
										<OperatorRef name="manage_priorities"/>
									</operator>
								</OpCall>
							</operator>
							<callParameters>
								<IdExpression>
									<path>
										<ConstVarRef name="_L32"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L16"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L17"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L15"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L18"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L24"/>
									</path>
								</IdExpression>
							</callParameters>
						</CallExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b3/4664/660/54f050622567"/>
					</pragmas>
				</Equation>
				<!-- _L1, _L2, _L11, _L28, _L29, _L30, _L31 = computeLeveLTransitions(_L19, _L21, _L22... -->
				<Equation>
					<lefts>
						<VariableRef name="_L1"/>
						<VariableRef name="_L2"/>
						<VariableRef name="_L11"/>
						<VariableRef name="_L28"/>
						<VariableRef name="_L29"/>
						<VariableRef name="_L30"/>
						<VariableRef name="_L31"/>
					</lefts>
					<right>
						<!-- computeLeveLTransitions(_L19, _L21, _L22, _L23, _L9, _L25, _L26, _L27) -->
						<CallExpression>
							<operator>
								<OpCall name="1">
									<operator>
										<OperatorRef name="computeLeveLTransitions"/>
									</operator>
								</OpCall>
							</operator>
							<callParameters>
								<IdExpression>
									<path>
										<ConstVarRef name="_L19"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L21"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L22"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L23"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L9"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L25"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L26"/>
									</path>
								</IdExpression>
								<IdExpression>
									<path>
										<ConstVarRef name="_L27"/>
									</path>
								</IdExpression>
							</callParameters>
						</CallExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b4/4664/660/54f050626546" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>takes one transition order, information from track and from train and computes the new level if applicable</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L16 = conditional_transition; -->
				<Equation>
					<lefts>
						<VariableRef name="_L16"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="conditional_transition"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b5/4664/660/54f0506217d3" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>priority table of conditional transitions</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L17 = level_transition_priority_table; -->
				<Equation>
					<lefts>
						<VariableRef name="_L17"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="level_transition_priority_table"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b6/4664/660/54f050622fa2" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>priority table f level transition orders</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L18 = driver_level_transition; -->
				<Equation>
					<lefts>
						<VariableRef name="_L18"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="driver_level_transition"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b7/4664/660/54f05062803" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>level transition order selected by the driver</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L15 = train_standstill; -->
				<Equation>
					<lefts>
						<VariableRef name="_L15"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="train_standstill"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b8/4664/660/54f0506254e3" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signalling train stand-still</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L19 = getAck; -->
				<Equation>
					<lefts>
						<VariableRef name="_L19"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="getAck"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778b9/4664/660/54f05062be7" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Acknowledge from driver for new level</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L21 = currentDistance; -->
				<Equation>
					<lefts>
						<VariableRef name="_L21"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="currentDistance"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778bb/4664/660/54f050624b15" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>the current distance (same units as in level transition order) in relation to the estimated train front</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L22 = ackDistance; -->
				<Equation>
					<lefts>
						<VariableRef name="_L22"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="ackDistance"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778bc/4664/660/54f05062f87" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>the distance for level transition acknowledge (same unit as level transition order position)</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L23 = immediateAck; -->
				<Equation>
					<lefts>
						<VariableRef name="_L23"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="immediateAck"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778bd/4664/660/54f050623dac" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signalling the requirement to immediately acknowledge level transition</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- next_level = _L1; -->
				<Equation>
					<lefts>
						<VariableRef name="next_level"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L1"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778be/4664/660/54f050626cbe" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>the level the train switched to</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- TripTrain = _L2; -->
				<Equation>
					<lefts>
						<VariableRef name="TripTrain"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L2"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778bf/4664/660/54f050626f33" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>boolean that signals if train must be tripped</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- previous_level = _L11; -->
				<Equation>
					<lefts>
						<VariableRef name="previous_level"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L11"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c0/4664/660/54f050624440" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>the previous ERTMS level of the train</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L24 = ERTMS_capabilities; -->
				<Equation>
					<lefts>
						<VariableRef name="_L24"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="ERTMS_capabilities"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c1/4664/660/54f050624d87" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>ERTMS capabilities of the train</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L25 = received_L2_L3_MA; -->
				<Equation>
					<lefts>
						<VariableRef name="_L25"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="received_L2_L3_MA"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c2/4664/660/54f050627f5d" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signalling whether a L2 or L3 MA for the announced region after transition border was received</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L26 = received_L1_MA; -->
				<Equation>
					<lefts>
						<VariableRef name="_L26"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="received_L1_MA"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c3/4664/660/54f05062c10" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signalling whether a L1 MA for the announced region after transition border was received</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- _L27 = received_target_speed; -->
				<Equation>
					<lefts>
						<VariableRef name="_L27"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="received_target_speed"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c4/4664/660/54f050621dc8" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signalling whether a target speed for the announced region after transition border was received</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- needsAckFromDriver = _L28; -->
				<Equation>
					<lefts>
						<VariableRef name="needsAckFromDriver"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L28"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1778c5/4664/660/54f0506225db" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean signaling whether level transition needs acknowledgment from driver</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- announced_level = _L29; -->
				<Equation>
					<lefts>
						<VariableRef name="announced_level"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L29"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/1a75e/CAD/D7C/55118e3e7212" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>the next level to which the train will switch or default transition order</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- announce_driver_selection = _L30; -->
				<Equation>
					<lefts>
						<VariableRef name="announce_driver_selection"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L30"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/3ba69/61B9/2528/5512e34f333c" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
							<comment>Boolean that announces if level transition was selected by driver</comment>
						</ed:Equation>
					</pragmas>
				</Equation>
				<!-- service_brake = _L31; -->
				<Equation>
					<lefts>
						<VariableRef name="service_brake"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="_L31"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/75991/61B9/2528/5513df31665b"/>
					</pragmas>
				</Equation>
				<!-- _L32 = (_L34) -> (_L33); -->
				<Equation>
					<lefts>
						<VariableRef name="_L32"/>
					</lefts>
					<right>
						<!-- (_L34) -> (_L33) -->
						<InitOp name="1">
							<value>
								<ListExpression>
									<items>
										<IdExpression>
											<path>
												<ConstVarRef name="_L34"/>
											</path>
										</IdExpression>
									</items>
								</ListExpression>
							</value>
							<flow>
								<ListExpression>
									<items>
										<IdExpression>
											<path>
												<ConstVarRef name="_L33"/>
											</path>
										</IdExpression>
									</items>
								</ListExpression>
							</flow>
						</InitOp>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/54737/5ADE/168C/55195cee6056"/>
					</pragmas>
				</Equation>
				<!-- _L33 = pre _L1; -->
				<Equation>
					<lefts>
						<VariableRef name="_L33"/>
					</lefts>
					<right>
						<!-- pre _L1 -->
						<PreOp name="1">
							<flow>
								<ListExpression>
									<items>
										<IdExpression>
											<path>
												<ConstVarRef name="_L1"/>
											</path>
										</IdExpression>
									</items>
								</ListExpression>
							</flow>
						</PreOp>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/5473f/5ADE/168C/551961fd37e2"/>
					</pragmas>
				</Equation>
				<!-- _L34 = M_LEVEL_Level_0; -->
				<Equation>
					<lefts>
						<VariableRef name="_L34"/>
					</lefts>
					<right>
						<IdExpression>
							<path>
								<ConstVarRef name="M_LEVEL_Level_0"/>
							</path>
						</IdExpression>
					</right>
					<pragmas>
						<ed:Equation oid="!ed/54747/5ADE/168C/55196217ed8"/>
					</pragmas>
				</Equation>
			</data>
			<pragmas>
				<ed:Operator oid="!ed/1778b2/4664/660/54f050622d86" xmlns="http://www.esterel-technologies.com/ns/scade/pragmas/editor/5">
					<comment>takes input from track, of train capabilities and of the current position</comment>
					<comment>calculates from an input set of transition orders which one must be execeuted</comment>
					<diagrams>
						<NetDiagram name="diagram_ManageLevels_1" landscape="true" format="A4 (210 297)" oid="!ed/1778c6/4664/660/54f0506267df">
							<presentationElements>
								<EquationGE presentable="!ed/1778b3/4664/660/54f050622567">
									<position>
										<Point x="6985" y="10054"/>
									</position>
									<size>
										<Size width="3905" height="6393"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778b4/4664/660/54f050626546">
									<position>
										<Point x="17886" y="7117"/>
									</position>
									<size>
										<Size width="3720" height="11023"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778b5/4664/660/54f0506217d3">
									<position>
										<Point x="4445" y="11615"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778b6/4664/660/54f050622fa2">
									<position>
										<Point x="4445" y="12541"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778b7/4664/660/54f05062803">
									<position>
										<Point x="4286" y="14367"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778b8/4664/660/54f0506254e3">
									<position>
										<Point x="4313" y="13441"/>
									</position>
									<size>
										<Size width="317" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="2" srcEquation="!ed/1778b5/4664/660/54f0506217d3" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="4710" y="11880"/>
										<Point x="5847" y="11880"/>
										<Point x="5847" y="11880"/>
										<Point x="6985" y="11880"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="3" srcEquation="!ed/1778b6/4664/660/54f050622fa2" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="4710" y="12806"/>
										<Point x="5847" y="12806"/>
										<Point x="5847" y="12806"/>
										<Point x="6985" y="12806"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="4" srcEquation="!ed/1778b8/4664/660/54f0506254e3" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="4630" y="13705"/>
										<Point x="5794" y="13705"/>
										<Point x="5794" y="13705"/>
										<Point x="6985" y="13705"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="5" srcEquation="!ed/1778b7/4664/660/54f05062803" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="4551" y="14631"/>
										<Point x="5768" y="14631"/>
										<Point x="5768" y="14631"/>
										<Point x="6985" y="14631"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778b9/4664/660/54f05062be7">
									<position>
										<Point x="14208" y="8070"/>
									</position>
									<size>
										<Size width="265" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778bb/4664/660/54f050624b15">
									<position>
										<Point x="14182" y="9313"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778bc/4664/660/54f05062f87">
									<position>
										<Point x="14182" y="10530"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778bd/4664/660/54f050623dac">
									<position>
										<Point x="14182" y="11748"/>
									</position>
									<size>
										<Size width="264" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="1" srcEquation="!ed/1778b9/4664/660/54f05062be7" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14473" y="8334"/>
										<Point x="16166" y="8334"/>
										<Point x="16166" y="8334"/>
										<Point x="17886" y="8334"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="2" srcEquation="!ed/1778bb/4664/660/54f050624b15" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14446" y="9578"/>
										<Point x="16166" y="9578"/>
										<Point x="16166" y="9578"/>
										<Point x="17886" y="9578"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="3" srcEquation="!ed/1778bc/4664/660/54f05062f87" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14446" y="10795"/>
										<Point x="16166" y="10795"/>
										<Point x="16166" y="10795"/>
										<Point x="17886" y="10795"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="4" srcEquation="!ed/1778bd/4664/660/54f050623dac" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14446" y="12012"/>
										<Point x="16166" y="12012"/>
										<Point x="16166" y="12012"/>
										<Point x="17886" y="12012"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778be/4664/660/54f050626cbe">
									<position>
										<Point x="25215" y="8229"/>
									</position>
									<size>
										<Size width="317" height="502"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778bf/4664/660/54f050626f33">
									<position>
										<Point x="25215" y="9604"/>
									</position>
									<size>
										<Size width="317" height="502"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778c0/4664/660/54f050624440">
									<position>
										<Point x="25215" y="10980"/>
									</position>
									<size>
										<Size width="317" height="502"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/1778be/4664/660/54f050626cbe">
									<positions>
										<Point x="21616" y="8493"/>
										<Point x="23442" y="8493"/>
										<Point x="23442" y="8493"/>
										<Point x="25268" y="8493"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="2" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/1778bf/4664/660/54f050626f33">
									<positions>
										<Point x="21616" y="9869"/>
										<Point x="23442" y="9869"/>
										<Point x="23442" y="9869"/>
										<Point x="25268" y="9869"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="3" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/1778c0/4664/660/54f050624440">
									<positions>
										<Point x="21616" y="11245"/>
										<Point x="23442" y="11245"/>
										<Point x="23442" y="11245"/>
										<Point x="25268" y="11245"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778c1/4664/660/54f050624d87">
									<position>
										<Point x="4286" y="15266"/>
									</position>
									<size>
										<Size width="265" height="502"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="6" srcEquation="!ed/1778c1/4664/660/54f050624d87" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="4551" y="15531"/>
										<Point x="5768" y="15531"/>
										<Point x="5768" y="15531"/>
										<Point x="6985" y="15531"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="5" srcEquation="!ed/1778b3/4664/660/54f050622567" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="10901" y="13256"/>
										<Point x="14393" y="13256"/>
										<Point x="14393" y="13256"/>
										<Point x="17886" y="13256"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778c2/4664/660/54f050627f5d">
									<position>
										<Point x="14129" y="14208"/>
									</position>
									<size>
										<Size width="265" height="502"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="6" srcEquation="!ed/1778c2/4664/660/54f050627f5d" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14393" y="14473"/>
										<Point x="16140" y="14473"/>
										<Point x="16140" y="14473"/>
										<Point x="17886" y="14473"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778c3/4664/660/54f05062c10">
									<position>
										<Point x="14023" y="15425"/>
									</position>
									<size>
										<Size width="265" height="503"/>
									</size>
								</EquationGE>
								<EquationGE presentable="!ed/1778c4/4664/660/54f050621dc8">
									<position>
										<Point x="14049" y="16669"/>
									</position>
									<size>
										<Size width="265" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="7" srcEquation="!ed/1778c3/4664/660/54f05062c10" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14288" y="15690"/>
										<Point x="16087" y="15690"/>
										<Point x="16087" y="15690"/>
										<Point x="17886" y="15690"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="8" srcEquation="!ed/1778c4/4664/660/54f050621dc8" dstEquation="!ed/1778b4/4664/660/54f050626546">
									<positions>
										<Point x="14314" y="16933"/>
										<Point x="16087" y="16933"/>
										<Point x="16087" y="16933"/>
										<Point x="17886" y="16933"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1778c5/4664/660/54f0506225db">
									<position>
										<Point x="25215" y="12383"/>
									</position>
									<size>
										<Size width="318" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="4" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/1778c5/4664/660/54f0506225db">
									<positions>
										<Point x="21616" y="12647"/>
										<Point x="23442" y="12647"/>
										<Point x="23442" y="12647"/>
										<Point x="25268" y="12647"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/1a75e/CAD/D7C/55118e3e7212">
									<position>
										<Point x="25188" y="13758"/>
									</position>
									<size>
										<Size width="318" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="5" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/1a75e/CAD/D7C/55118e3e7212">
									<positions>
										<Point x="21616" y="14023"/>
										<Point x="23416" y="14023"/>
										<Point x="23416" y="14023"/>
										<Point x="25241" y="14023"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/3ba69/61B9/2528/5512e34f333c">
									<position>
										<Point x="25215" y="15134"/>
									</position>
									<size>
										<Size width="317" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="6" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/3ba69/61B9/2528/5512e34f333c">
									<positions>
										<Point x="21616" y="15399"/>
										<Point x="23442" y="15399"/>
										<Point x="23442" y="15399"/>
										<Point x="25268" y="15399"/>
									</positions>
								</Edge>
								<EquationGE presentable="!ed/75991/61B9/2528/5513df31665b">
									<position>
										<Point x="25347" y="16510"/>
									</position>
									<size>
										<Size width="317" height="503"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="7" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/75991/61B9/2528/5513df31665b">
									<positions>
										<Point x="21616" y="16775"/>
										<Point x="23495" y="16775"/>
										<Point x="23495" y="16775"/>
										<Point x="25400" y="16775"/>
									</positions>
								</Edge>
								<EquationGE rotation="180" presentable="!ed/54737/5ADE/168C/55195cee6056">
									<position>
										<Point x="13309" y="3016"/>
									</position>
									<size>
										<Size width="1005" height="1006"/>
									</size>
								</EquationGE>
								<EquationGE rotation="180" presentable="!ed/5473f/5ADE/168C/551961fd37e2">
									<position>
										<Point x="16140" y="3122"/>
									</position>
									<size>
										<Size width="1006" height="661"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="1" srcEquation="!ed/1778b4/4664/660/54f050626546" dstEquation="!ed/5473f/5ADE/168C/551961fd37e2">
									<positions>
										<Point x="21616" y="8493"/>
										<Point x="22939" y="8493"/>
										<Point x="22939" y="3466"/>
										<Point x="17145" y="3466"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="1" srcEquation="!ed/5473f/5ADE/168C/551961fd37e2" dstEquation="!ed/54737/5ADE/168C/55195cee6056">
									<positions>
										<Point x="16140" y="3440"/>
										<Point x="15240" y="3440"/>
										<Point x="15240" y="3519"/>
										<Point x="14314" y="3519"/>
									</positions>
								</Edge>
								<Edge leftVarIndex="1" rightExprIndex="1" srcEquation="!ed/54737/5ADE/168C/55195cee6056" dstEquation="!ed/1778b3/4664/660/54f050622567">
									<positions>
										<Point x="13309" y="3519"/>
										<Point x="5662" y="3519"/>
										<Point x="5662" y="10980"/>
										<Point x="6985" y="10980"/>
									</positions>
								</Edge>
								<EquationGE kind="OBJ_LIT" presentable="!ed/54747/5ADE/168C/55196217ed8">
									<position>
										<Point x="11324" y="1958"/>
									</position>
									<size>
										<Size width="212" height="317"/>
									</size>
								</EquationGE>
								<Edge leftVarIndex="1" rightExprIndex="2" srcEquation="!ed/54747/5ADE/168C/55196217ed8" dstEquation="!ed/54737/5ADE/168C/55195cee6056">
									<positions>
										<Point x="11536" y="2117"/>
										<Point x="13811" y="2117"/>
										<Point x="13811" y="3016"/>
									</positions>
								</Edge>
							</presentationElements>
						</NetDiagram>
					</diagrams>
				</ed:Operator>
			</pragmas>
		</Operator>
	</declarations>
</File>
